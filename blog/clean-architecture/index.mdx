---
slug: clean-architecture
title: Thoughts about clean architecture
authors: [3sam3]
tags: [architecture, software, design]
date: 2025-08-23T01:00:00
---

> If you prefer english, I recommend you to use immersive translation or google translate.

## í´ë¦° ì•„í‚¤í…ì²˜ë€?
![onion-architecture](./onion-architecture.png)
ì¶œì²˜: [NestJS and Project Structure - What to Do?](https://dev.to/smolinari/nestjs-and-project-structure-what-to-do-1223)


í´ë¦° ì•„í‚¤í…ì²˜ëŠ” `Robert C. Martin(AKA uncle Bob)`ì— ì˜í•´ ê³ ì•ˆëœ ì†Œí”„íŠ¸ì›¨ì–´ ì•„í‚¤í…ì²˜ íŒ¨í„´ì´ë‹¤.
ëª¨ë“  ì•„í‚¤í…ì²˜ ìŠ¤íƒ€ì¼ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ ìœ ì—°í•˜ê³  í…ŒìŠ¤íŠ¸í•˜ê¸° ì‰¬ìš°ë©° ìœ ì§€ë³´ìˆ˜ê°€ ìš©ì´í•œ ì‹œìŠ¤í…œì„ ë§Œë“¤ê¸° ìœ„í•œ ì•„í‚¤í…ì²˜ ìŠ¤íƒ€ì¼ì´ë‹¤.

êµ¬ì²´ì ì¸ ë°©ë²•ë¡ ì´ë¼ê¸°ë³´ë‹¤ëŠ” 'ì´ë ‡ê²Œ í•˜ë©´ ì¢‹ë”ë¼'ë¼ëŠ” ê°€ì´ë“œë¼ì¸ ë‚´ì§€ëŠ” ì² í•™ì˜ ì§‘í•©ì— ê°€ê¹ë‹¤.

## Layered Architecture

ì ì‹œ `Layered Architecture`ì— ëŒ€í•´ ì•Œì•„ë³´ì.

`Layered` ë§ ê·¸ëŒ€ë¡œ ê³„ì¸µì˜ ë¶„ë¦¬ë¥¼ í†µí•´ ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬ë¥¼ ì´ë£¨ëŠ” ì•„í‚¤í…ì²˜ ìŠ¤íƒ€ì¼ì´ë‹¤. ê³µì¥ì˜ ê° ë¼ì¸ë§ˆë‹¤ ë‹´ë‹¹í•˜ëŠ” ì—­í• ì´ ë‹¤ë¥¸ ê²ƒê³¼ ìœ ì‚¬í•˜ë‹¤.

3,4 ê³„ì¸µì€ ì•„ë˜ì™€ ê°™ì´ ë¶„ë¥˜í•œë‹¤.

`3ê³„ì¸µ`
- Presentation Layer (UI Layer)
- Application/Business Logic Layer (Domain Layer)
- Data Access Layer (Infrastructure Layer)

`4ê³„ì¸µ`
- Presentation Layer (UI Layer)
- Business Logic Layer (Domain Layer)
- Persistence Layer (Repository Layer)
- Datasource Layer

3ê³„ì¸µê³¼ 4ê³„ì¸µì˜ ì°¨ì´ëŠ” Business Logic Layerì™€ Persistence Layerì˜ ë¶„ë¦¬ ì—¬ë¶€ì´ë‹¤.

- `3ê³„ì¸µì˜ Application/Business Logic Layer`ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ê³¼ DBì— ëŒ€í•œ ì ‘ê·¼ì— ëŒ€í•œ ì—­í• ì„ ëª¨ë‘ ë‹´ë‹¹í•œë‹¤.
- `4ê³„ì¸µì˜ Business Logic Layer`ëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ì— ëŒ€í•œ ì—­í• ë§Œ ë‹´ë‹¹í•˜ê³ , `Persistence Layer`ê°€ DBì— ëŒ€í•œ ì ‘ê·¼ì„ ë‹´ë‹¹í•œë‹¤.

`Nest.js`ì™€ ê°™ì€ í”„ë ˆì„ì›Œí¬ë¥¼ ì´ìš©í•´ í”„ë¡œì íŠ¸ë¥¼ ì´ˆê¸° êµ¬ì„±í• ë•Œ [ìœ„ì™€ ê°™ì€ êµ¬ì„±](https://github.com/nestjs/nest/tree/master/sample/01-cats-app)ìœ¼ë¡œ í”„ë¡œì íŠ¸ê°€ ì„¸íŒ…ëœë‹¤.
`Spring` ë“±ì˜ í”„ë ˆì„ì›Œí¬ë¥¼ ì´ìš©í•˜ë‹¤ë³´ë©´ ìì—°íˆ ì†ê³¼ ëˆˆì— ìµê²Œë˜ëŠ” êµ¬ì¡°ì´ê¸°ë„ í•˜ë‹¤.

ì—‰í´ë°¥ì€ ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜ëŠ” ìì—°ìŠ¤ë ˆ Database-centricí•œ ì„¤ê³„ë¥¼ ìœ ë„í•˜ê²Œ ë˜ë¯€ë¡œ ë°ì´í„°ë² ì´ìŠ¤ ì˜ì¡´ì„±ì´ ì „íŒŒë˜ëŠ” ë“±ì˜ ë¬¸ì œì ì´ ìˆì–´ `Clean Architecture`ë¥¼ ê³ ì•ˆí•˜ê²Œ ë˜ì—ˆë‹¤ê³  í•œë‹¤.

## Clean Architecture
![clean-architecture.png](clean-architecture.png)

`Layered Architecture` ë¡œëŠ” ë¬´ì–¸ê°€ ë¶€ì¡±í–ˆê¸°ì— ê·¸ê±¸ ê°œì„ í•œ `Clean Architecture`ê°€ ê³ ì•ˆë˜ì—ˆì„ ê²ƒì´ë‹¤.

ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜ì˜ í•µì‹¬ ë¬¸ì œ ì¤‘ í•˜ë‚˜ëŠ” `ìƒìœ„ ê³„ì¸µ(ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)`ì´ `í•˜ìœ„ ê³„ì¸µ(DB, UI)`ì— ì§ì ‘ì ìœ¼ë¡œ ì˜ì¡´í•˜ëŠ” êµ¬ì¡°ì´ë‹¤.

ê·¸ë¡œ ì¸í•´ ìƒê¸°ëŠ” ë¬¸ì œì ì€ ì•„ë˜ì™€ ê°™ë‹¤.
- í•˜ìœ„ ê³„ì¸µì˜ ë³€ê²½ì´ ìƒìœ„ ê³„ì¸µì— íŒŒê¸‰ íš¨ê³¼ë¥¼ ì¼ìœ¼í‚¨ë‹¤.
- íŠ¹ì • ê¸°ìˆ  ìŠ¤íƒì— ëŒ€í•œ ì¢…ì†ì„±ì´ ë†’ì•„ì§„ë‹¤.
- ì‹œìŠ¤í…œì˜ ìœ ì—°ì„±ê³¼ í…ŒìŠ¤íŠ¸ ìš©ì´ì„±ì´ ì €í•´ëœë‹¤.

í•´ê²°ì±…ì€ `ê³ ìˆ˜ì¤€ ëª¨ë“ˆ(ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)`ì´ `ì €ìˆ˜ì¤€ ëª¨ë“ˆ(ë°ì´í„°ë² ì´ìŠ¤ êµ¬í˜„ì²´, UI êµ¬í˜„ì²´ ë“±)`ì— ì˜ì¡´í•˜ì§€ ì•Šê³ , ì–‘ìª½ ëª¨ë‘ ì¶”ìƒí™”(ì¸í„°í˜ì´ìŠ¤)ì— ì˜ì¡´í•˜ê²Œ ë§Œë“œëŠ” ê²ƒì´ë‹¤.

ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜ë¡œ 4ê³„ì¸µ ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜ë¥¼ ë‹¨ìˆœí•˜ê²Œ êµ¬í˜„í•˜ë©´ ì•„ë˜ì™€ ê°™ì€ êµ¬ì¡°ê°€ ëœë‹¤.
```typescript showLineNumbers {9}
export class UserRepository {
    async findUserById(id: number) {}
}

export class UserService {
    private userRepository: UserRepository;

    constructor(userRepository: UserRepository) {
        this.userRepository = userRepository;
    }
}
```

ë§Œì•½ ì´ ìƒí™©ì—ì„œ DBë¥¼ ë³€ê²½í•˜ê³  ì‹¶ë‹¤ë©´, ìœ„ì˜ êµ¬ì¡°ì—ì„œëŠ” ì‰½ì§€ ì•Šì„ê²ƒì´ë‹¤.
ì•„ë˜ì™€ ê°™ì€ êµ¬ì¡°ì—ì„œëŠ” ì¶”ìƒí™”ëœ ì¸í„°í˜ì´ìŠ¤ë¥¼ í†µí•´ ì˜ì¡´ì„±ì„ ì£¼ì…ë°›ê¸° ë•Œë¬¸ì—, DBë¥¼ ë³€ê²½í•˜ëŠ” ê²ƒì´ í›¨ì”¬ ìˆ˜ì›”í•˜ë‹¤.

~~GoF ë””ìì¸íŒ¨í„´ì˜ ì¶”ìƒxx íŒ¨í„´ì´ ìƒê°ë‚œë‹¤.~~

```typescript showLineNumbers {14,17-18}
export interface IUserRepository {
  findUserById(id: number): Promise<null>;
}

// concrete.user.repository
export class ConcreteMongoUserRepository implements IUserRepository {
    async findUserById(id: number) {}
}

// í´ë¦°ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨ì˜ use-case ê³„ì¸µ. (ì‚¬ìš©ë¡€ê°€ ì¤‘ìš”í•˜ì§€ ê³„ì¸µë³„ ì´ë¦„ì„ ê·¸ëŒ€ë¡œ ì‚¬ìš©í•˜ëŠ”ê²ƒì€ ì¤‘ìš”í•˜ì§€ ì•Šë‹¤ê³  ìƒê°í•˜ì—¬ service ë¼ëŠ” ì´ë¦„ì„ ì‚¬ìš©í•˜ì˜€ë‹¤.)
// user.service
@Injectable()
export class UserService {
  private userRepository: IUserRepository; // ì¸í„°í˜ì´ìŠ¤ì— ì˜ì¡´

  constructor(
    @Inject('ConcreteMongoUserRepository')
    userRepository: IUserRepository
  ) {}
}
```

### Adapter
ì™¸ë¶€ ì„¸ê³„ì™€ ë‚´ë¶€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ì´ì–´ì£¼ëŠ” ë‹¤ë¦¬ ì—­í• ì„ í•˜ëŠ” ì¹œêµ¬ë‹¤.
ì™¸ë¶€ ì‹œìŠ¤í…œì´ ê°€ì§€ëŠ” ìì²´ì ì¸ ëª¨ë¸ê³¼(API, DB) ë‚´ë¶€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì´ ê°€ì§€ëŠ” Entity ë˜ëŠ” VO(Value Object) ê°„ì˜ ë³€í™˜ì„ ë‹´ë‹¹í•œë‹¤.

ì•„ë˜ì™€ ê°™ì´ ë¶„ë¥˜í•˜ê¸°ë„ í•œë‹¤.
- Primary Adapters (Driving): ì™¸ë¶€ì—ì„œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í˜¸ì¶œ (Controller, CLI, Web API)
- Secondary Adapters (Driven): ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì™¸ë¶€ë¥¼ í˜¸ì¶œ (Database, File System, External API)

## Hexagonal Architecture
![hexagonal-architecture.png](hexagonal-architecture.png)

port-and-adapter íŒ¨í„´ì´ë¼ê³ ë„ ë¶ˆë¦¬ëŠ”ë°, ê¸°ë³¸ ì›ì¹™ë“¤ë§Œ ì¡´ì¬í•˜ëŠ” í´ë¦°ì•„í‚¤í…ì²˜ë¥¼ ì¡°ê¸ˆ ë” êµ¬ì²´í™”í•œ íŒ¨í„´ì´ë‹¤. í”„ë ˆì„ì›Œí¬ ëŠë‚Œ?

in & output í¬íŠ¸ì™€ ê·¸ ì•ë‹¨ì˜ Adapterë¥¼ ì´ìš©í•´ ì…ì¶œë ¥ ì‘ë‹µì— ëŒ€í•œ ë¶€ë¶„ì„ ì¶”ìƒí™”í•˜ì˜€ë‹¤.

## ì •ë¦¬
í´ë¦° ì•„í‚¤í…ì²˜ ìŠ¤íƒ€ì¼ì— ëŒ€í•´ ê°„ëµí•˜ê²Œ ì •ë¦¬í•´ë³´ì•˜ë‹¤.

ê°œì¸ì ìœ¼ë¡œ í´ë¦° ì•„í‚¤í…ì²˜ ìŠ¤íƒ€ì¼ì´ë€ê±´ ìš”ë¦¬ ë ˆì‹œí”¼ì— ë” ê°€ê¹ë‹¤ê³  ìƒê°í•˜ëŠ”ë°, ë‚´ í”„ë¡œì íŠ¸ê°€ ì–´ë–¤ ì„±ê²©ì¸ì§€ì— ëŒ€í•œ ìƒê°ì—†ì´ ì¢‹ë‹¤ê³  ë¬´ì‘ì • ì ìš©í•˜ë‹¤ë³´ë©´ ë¼ë©´ê°€ì§€ê³  ì½”ìŠ¤ìš”ë¦¬ ë§Œë“œëŠ” ê¼´ì„ ë³¼ ìˆ˜ ìˆë‹¤ê³  ìƒê°í•œë‹¤.
í”„ë¡œì íŠ¸ì˜ êµ¬ì¡°ë¥¼ ë³€ê²½í•´ë²„ë¦¬ëŠ” ì•„í‚¤í…ì²˜ ìŠ¤íƒ€ì¼ì˜ ë³€ê²½ì„ ë„ëª¨í•  ë•ŒëŠ” ë”ë”ìš±.

ëª¨ë“  ì•„í‚¤í…ì²˜ ìŠ¤íƒ€ì¼ì´ ê·¸ë ‡ë“¯ ê´€ë¦¬ë¥¼ ìœ„í•´ ë³µì¡ì„±ì„ ì˜¬ë¦¬ëŠ” í˜•íƒœì´ê¸° ë•Œë¬¸ì— ì ì ˆí•œ ì„ ì—ì„œ íƒ€í˜‘í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•  ê²ƒ ê°™ë‹¤.

~~ì•ˆ ê·¸ëŸ¬ë©´ íŒ€ì›ë“¤ì—ê²Œ ìš•ì´ë€ ìš•ì€ ë‹¤ ë“¤ì–´ë¨¹ê²Œ ë  ê²ƒì´ë‹¤.~~

## References
- [WSO2 ì•„í‚¤í…ì³ ë ˆí¼ëŸ°ìŠ¤](https://github.com/wso2/reference-architecture)

### Clean architecture
- [NHN FORWARD - í´ë¦°ì•„í‚¤í…ì²˜ ì• ë§¤í•œ ë¶€ë¶„ ì •í•´ë“œë¦½ë‹ˆë‹¤.](https://www.youtube.com/watch?v=g6Tg6_qpIVc&ab_channel=NHNCloud)
- [ì„œë¹„ìŠ¤ ë ˆì´ì–´ ë¶„ë¦¬ì— ëŒ€í•˜ì—¬](https://jaeseo0519.tistory.com/380)
- [í´ë¦° ì•„í‚¤í…ì²˜ë€?](https://k-elon.tistory.com/38)
- [ìš”ì¦˜ í•«í•œ Clean Architecture ì™œ ì“°ëŠ”ê±°ì•¼?](https://meetup.nhncloud.com/posts/345)
- [Clean Architecture](https://janechoi.tistory.com/79)
- ~~[nestjs clean architecture](https://v-checha.medium.com/building-enterprise-grade-nestjs-applications-a-clean-architecture-template-ebcb6462c692)~~
  - ~~[github](https://github.com/v-checha/nestjs-template/)~~
  - [NestJS and Project Structure - What to Do? ğŸ”¥](https://dev.to/smolinari/nestjs-and-project-structure-what-to-do-1223) ìœ„ ê¸€ì„ ì½ê³  ì•„ë˜ ê¸€ì„ ì½ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤.
-[Onion Architecture ğŸ”¥](https://medium.com/expedia-group-tech/onion-architecture-deed8a554423)


### Hexagonal architecture
- [Ready for changes with Hexagonal Architecture](https://netflixtechblog.com/ready-for-changes-with-hexagonal-architecture-b315ec967749)
- [ì½”ë“œ ì‚¬ë¡€ë¡œ ë³´ëŠ” Domain-Driven í—¥ì‚¬ê³ ë‚  ì•„í‚¤í…ì²˜](https://devblog.kakaostyle.com/ko/2025-03-21-1-domain-driven-hexagonal-architecture-by-example/)
- [Hexagonal Architecture](https://devocean.sk.com/blog/techBoardDetail.do?ID=165581)
