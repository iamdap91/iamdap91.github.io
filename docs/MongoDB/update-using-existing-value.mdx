---
slug: update-using-existing-value
title: Update Using Document Value
authors: [3sam3]
tags: [mongo, mongoose, javascript, query]
---

```mermaid
%%{init: {"flowchart": {"htmlLabels": false}} }%%
flowchart LR
    source --> mongoose_query
    mongoose_query --> dest

```

## source

```json showLineNumbers
{
  "Class_Grade": "b",
  "Homework_Grade": "c"
}
```

## process

```js showLineNumbers {4-13}
db.collection.updateMany(
  {},
  // *** Don't forget Array ***
  [
    {
      $set: {
        Grades: {
          Class_Grade: "$Class_Grade",
          Homework_Grade: "$Homework_Grade",
        },
      },
    },
  ],
);
```

## dest

```json showLineNumbers {2}
{
  "Grades": {
    "Class_Grade": "b",
    "Homework_Grade": "c"
  }
}
```
